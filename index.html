<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Belajar Bahasa Jepang - Dashboard Guru</title>
  <style>
    :root {
      --w: 520px;
      --h: 420px;
      --bg-primary: linear-gradient(135deg, #fef5f8, #ffe4f0);
      --card-front: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(252,240,245,0.98));
      --card-back: linear-gradient(180deg, #ec4899, #db2777);
      --text-primary: #0f172a;
      --text-secondary: rgba(15,23,42,0.7);
      --shadow: 0 24px 60px rgba(236,72,153,0.12);
      --btn-bg: #fff;
      --btn-shadow: 0 6px 18px rgba(236,72,153,0.08);
      --sidebar-bg: rgba(255,255,255,0.95);
      --header-bg: rgba(255,255,255,0.98);
    }
    
    [data-theme="dark"] {
      --bg-primary: linear-gradient(135deg, #0f172a, #1e293b);
      --card-front: linear-gradient(180deg, rgba(30,41,59,0.95), rgba(51,65,85,0.98));
      --card-back: linear-gradient(180deg, #6366f1, #4f46e5);
      --text-primary: #e2e8f0;
      --text-secondary: rgba(226,232,240,0.7);
      --shadow: 0 24px 60px rgba(99,102,241,0.3);
      --btn-bg: rgba(51,65,85,0.8);
      --btn-shadow: 0 6px 18px rgba(99,102,241,0.2);
      --sidebar-bg: rgba(30,41,59,0.95);
      --header-bg: rgba(30,41,59,0.98);
    }
    
    [data-theme="light"] {
      --bg-primary: linear-gradient(135deg, #f8fafc, #e0f2fe);
      --card-front: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(248,250,252,0.98));
      --card-back: linear-gradient(180deg, #0ea5e9, #0284c7);
      --text-primary: #0f172a;
      --text-secondary: rgba(15,23,42,0.7);
      --shadow: 0 24px 60px rgba(14,165,233,0.12);
      --btn-bg: #fff;
      --btn-shadow: 0 6px 18px rgba(14,165,233,0.08);
      --sidebar-bg: rgba(255,255,255,0.95);
      --header-bg: rgba(255,255,255,0.98);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: 'Segoe UI', Inter, system-ui, -apple-system, Roboto, Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      background: var(--bg-primary);
      transition: background 0.4s ease;
      color: var(--text-primary);
    }

    /* Dashboard Layout */
    .dashboard {
      display: none;
      min-height: 100vh;
    }

    .dashboard.active {
      display: flex;
    }

    .sidebar {
      width: 280px;
      background: var(--sidebar-bg);
      backdrop-filter: blur(10px);
      border-right: 1px solid rgba(0,0,0,0.05);
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 20px;
      position: fixed;
      height: 100vh;
      overflow-y: auto;
      transition: all 0.4s ease;
      z-index: 100;
    }

    .sidebar.minimized {
      width: 80px;
      padding: 24px 12px;
    }

    .sidebar.minimized .sidebar-header {
      text-align: center;
    }

    .sidebar.minimized .sidebar-title,
    .sidebar.minimized .sidebar-subtitle {
      display: none;
    }

    .sidebar.minimized .nav-item span:not(.nav-icon) {
      display: none;
    }

    .sidebar.minimized .nav-item {
      justify-content: center;
      padding: 14px;
    }

    .sidebar-toggle {
      position: absolute;
      top: 20px;
      right: -15px;
      width: 30px;
      height: 30px;
      background: var(--btn-bg);
      border: none;
      border-radius: 50%;
      box-shadow: var(--btn-shadow);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      transition: all 0.3s ease;
      z-index: 101;
    }

    .sidebar-toggle:hover {
      transform: scale(1.1);
    }

    .sidebar-header {
      padding-bottom: 20px;
      border-bottom: 2px solid rgba(0,0,0,0.06);
    }

    .sidebar-title {
      font-size: 20px;
      font-weight: 800;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .sidebar-subtitle {
      font-size: 13px;
      color: var(--text-secondary);
    }

    .nav-menu {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .nav-item {
      padding: 14px 16px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 15px;
      font-weight: 600;
      color: var(--text-primary);
      background: transparent;
      border: none;
      width: 100%;
      text-align: left;
    }

    .nav-item:hover {
      background: var(--btn-bg);
      transform: translateX(4px);
      box-shadow: var(--btn-shadow);
    }

    .nav-item.active {
      background: linear-gradient(135deg, #ec4899, #db2777);
      color: white;
      box-shadow: 0 4px 12px rgba(236,72,153,0.3);
    }

    [data-theme="dark"] .nav-item.active {
      background: linear-gradient(135deg, #6366f1, #4f46e5);
    }

    [data-theme="light"] .nav-item.active {
      background: linear-gradient(135deg, #0ea5e9, #0284c7);
    }

    .nav-icon {
      font-size: 20px;
    }

    .main-content {
      margin-left: 280px;
      flex: 1;
      padding: 24px;
      overflow-y: auto;
      animation: fadeIn 0.5s ease;
      transition: margin-left 0.4s ease;
    }

    .main-content.expanded {
      margin-left: 80px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Welcome Screen with Animation */
    .welcome-screen {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background: var(--bg-primary);
      position: relative;
      overflow: hidden;
    }

    .welcome-screen.hidden {
      display: none;
    }

    .welcome-content {
      text-align: center;
      padding: 40px;
      animation: welcomeSlideUp 1s ease-out;
      position: relative;
      z-index: 2;
    }

    @keyframes welcomeSlideUp {
      0% { opacity: 0; transform: translateY(60px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    .welcome-emoji {
      font-size: 120px;
      animation: floatBounce 3s ease-in-out infinite;
      display: inline-block;
    }

    @keyframes floatBounce {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      25% { transform: translateY(-20px) rotate(-5deg); }
      75% { transform: translateY(-10px) rotate(5deg); }
    }

    .welcome-title {
      font-size: clamp(40px, 8vw, 72px);
      font-weight: 900;
      color: var(--text-primary);
      margin: 30px 0 20px 0;
      line-height: 1.1;
      animation: titleGlow 2s ease-in-out infinite;
    }

    @keyframes titleGlow {
      0%, 100% { text-shadow: 0 0 20px rgba(236,72,153,0.3); }
      50% { text-shadow: 0 0 40px rgba(236,72,153,0.5); }
    }

    .welcome-subtitle {
      font-size: clamp(16px, 3vw, 24px);
      color: var(--text-secondary);
      margin: 0 0 50px 0;
      animation: fadeInDelay 1s ease-out 0.5s both;
    }

    @keyframes fadeInDelay {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .btn-start {
      padding: 20px 60px;
      font-size: 22px;
      font-weight: 700;
      background: linear-gradient(135deg, #ec4899, #db2777);
      color: white;
      border: none;
      border-radius: 16px;
      cursor: pointer;
      box-shadow: 0 12px 32px rgba(236,72,153,0.4);
      transition: all 0.4s ease;
      animation: pulseScale 2s ease-in-out infinite;
    }

    @keyframes pulseScale {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .btn-start:hover {
      transform: translateY(-6px) scale(1.05);
      box-shadow: 0 20px 50px rgba(236,72,153,0.5);
      animation: none;
    }

    /* Particle Background Animation */
    .particles {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 1;
    }

    .particle {
      position: absolute;
      width: 8px;
      height: 8px;
      background: radial-gradient(circle, rgba(236,72,153,0.6), transparent);
      border-radius: 50%;
      animation: float 15s infinite ease-in-out;
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.6; }
      50% { transform: translate(50px, -100px) scale(1.5); opacity: 0.3; }
    }

    /* Header */
    .page-header {
      background: var(--header-bg);
      backdrop-filter: blur(10px);
      padding: 24px 32px;
      border-radius: 16px;
      box-shadow: var(--shadow);
      margin-bottom: 32px;
    }

    .page-title {
      font-size: 32px;
      font-weight: 800;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .page-description {
      font-size: 15px;
      color: var(--text-secondary);
    }

    /* Stats Cards */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }

    .stat-card {
      background: var(--btn-bg);
      padding: 24px;
      border-radius: 16px;
      box-shadow: var(--btn-shadow);
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 32px rgba(0,0,0,0.12);
    }

    .stat-icon {
      font-size: 36px;
      margin-bottom: 12px;
    }

    .stat-value {
      font-size: 32px;
      font-weight: 800;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 14px;
      color: var(--text-secondary);
      font-weight: 600;
    }

    /* Shortcut Cards */
    .shortcuts-section {
      margin-top: 32px;
    }

    .section-title {
      font-size: 24px;
      font-weight: 800;
      color: var(--text-primary);
      margin-bottom: 20px;
    }

    .shortcuts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }

    .shortcut-card {
      background: var(--btn-bg);
      padding: 28px;
      border-radius: 16px;
      box-shadow: var(--btn-shadow);
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      border: 2px solid transparent;
    }

    .shortcut-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 16px 40px rgba(0,0,0,0.15);
      border-color: var(--text-primary);
    }

    .shortcut-card.disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .shortcut-card.disabled:hover {
      transform: none;
      border-color: transparent;
    }

    .shortcut-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }

    .shortcut-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .shortcut-desc {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    .badge-coming {
      display: inline-block;
      background: linear-gradient(135deg, #f59e0b, #d97706);
      color: white;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 700;
      margin-top: 8px;
    }

    /* Theme Switcher - Fixed Position */
    .theme-switcher {
      position: fixed;
      bottom: 24px;
      right: 24px;
      display: flex;
      gap: 8px;
      z-index: 1000;
      background: var(--btn-bg);
      padding: 8px;
      border-radius: 16px;
      box-shadow: var(--shadow);
    }

    .theme-btn {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      background: transparent;
    }

    .theme-btn:hover {
      transform: scale(1.1);
      background: rgba(0,0,0,0.05);
    }

    .theme-btn.active {
      background: linear-gradient(135deg, #ec4899, #db2777);
      transform: scale(1.1);
    }

    [data-theme="dark"] .theme-btn.active {
      background: linear-gradient(135deg, #6366f1, #4f46e5);
    }

    [data-theme="light"] .theme-btn.active {
      background: linear-gradient(135deg, #0ea5e9, #0284c7);
    }

    /* Flashcard Enhanced */
    .flashcard-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      height: calc(100vh - 200px);
      justify-content: space-between;
    }

    .flashcard-container.fullscreen-mode {
      height: 100vh;
      max-width: 100%;
      padding: 40px;
      background: var(--bg-primary);
      justify-content: center;
    }

    body.fullscreen-active {
      overflow: hidden;
    }

    .fullscreen-mode .page-header {
      display: none;
    }

    .controls-panel {
      background: var(--btn-bg);
      padding: 20px 24px;
      border-radius: 16px;
      box-shadow: var(--btn-shadow);
      margin-bottom: 24px;
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .control-group {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .control-group label {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
    }

    select, .btn {
      padding: 10px 18px;
      border-radius: 10px;
      border: none;
      background: var(--btn-bg);
      color: var(--text-primary);
      box-shadow: var(--btn-shadow);
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .btn:hover, select:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    }

    .card-stage {
      display: flex;
      justify-content: center;
      align-items: center;
      flex: 1;
      perspective: 1400px;
      min-height: 400px;
    }

    .card-scene {
      width: var(--w);
      height: var(--h);
    }

    .card {
      width: 100%;
      height: 100%;
      border-radius: 20px;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
      cursor: pointer;
    }

    .card.flipped {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      inset: 0;
      border-radius: 20px;
      padding: 40px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      backface-visibility: hidden;
      background: var(--card-front);
      box-shadow: var(--shadow);
      color: var(--text-primary);
    }

    .card-face.back {
      transform: rotateY(180deg);
      background: var(--card-back);
      color: white;
    }

    .card-kanji {
      font-weight: 900;
      line-height: 1;
      margin-bottom: 12px;
      text-align: center;
      word-wrap: break-word;
      max-width: 100%;
    }

    .card-furi {
      color: rgba(255,255,255,0.9);
      margin-bottom: 12px;
      text-align: center;
    }

    .card-meaning {
      color: rgba(255,255,255,0.95);
      margin-top: 12px;
      text-align: center;
      font-weight: 600;
      max-width: 90%;
      word-wrap: break-word;
    }

    .card-controls {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-top: 20px;
      flex-wrap: wrap;
      flex-shrink: 0;
    }

    .progress-info {
      text-align: center;
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
      margin: 16px 0;
      flex-shrink: 0;
    }

    /* Kanji List Enhanced */
    .level-tabs {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 32px;
    }

    .level-tab {
      padding: 12px 24px;
      background: var(--btn-bg);
      border: 2px solid transparent;
      border-radius: 12px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      transition: all 0.3s ease;
    }

    .level-tab:hover {
      transform: translateY(-2px);
      border-color: #ec4899;
    }

    .level-tab.active {
      background: linear-gradient(135deg, #ec4899, #db2777);
      color: white;
      border-color: transparent;
      transform: translateY(-2px);
    }

    [data-theme="dark"] .level-tab.active {
      background: linear-gradient(135deg, #6366f1, #4f46e5);
    }

    [data-theme="light"] .level-tab.active {
      background: linear-gradient(135deg, #0ea5e9, #0284c7);
    }

    .kanji-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
    }

    .kanji-item {
      background: var(--btn-bg);
      border-radius: 16px;
      padding: 24px;
      box-shadow: var(--btn-shadow);
      transition: all 0.3s ease;
      text-align: center;
    }

    .kanji-item:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 32px rgba(0,0,0,0.15);
    }

    .kanji-char {
      font-size: 56px;
      font-weight: 900;
      color: var(--text-primary);
      margin-bottom: 12px;
    }

    .kanji-furi {
      font-size: 16px;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .kanji-meaning {
      font-size: 18px;
      color: var(--text-primary);
      font-weight: 600;
    }

    .kanji-level {
      margin-top: 12px;
      font-size: 12px;
      color: var(--text-secondary);
      font-weight: 700;
    }

    /* Loading */
    .loading-screen {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background: var(--bg-primary);
      font-size: 24px;
      color: var(--text-primary);
      font-weight: 600;
    }

    .loading-screen.hidden {
      display: none;
    }

    .error-box {
      background: #fee;
      color: #c00;
      padding: 24px;
      border-radius: 16px;
      margin: 20px;
      text-align: center;
      max-width: 600px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
      }

      .sidebar.open {
        transform: translateX(0);
      }

      .sidebar.minimized {
        width: 280px;
        padding: 24px;
      }

      .sidebar-toggle {
        display: none;
      }

      .main-content {
        margin-left: 0;
      }

      .main-content.expanded {
        margin-left: 0;
      }

      .hamburger {
        display: block;
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 101;
        background: var(--btn-bg);
        border: none;
        padding: 12px;
        border-radius: 12px;
        cursor: pointer;
        font-size: 24px;
        box-shadow: var(--shadow);
      }

      :root { --w: 90vw; --h: 60vw; }

      .flashcard-container {
        height: auto;
      }
    }

    @media (min-width: 769px) {
      .hamburger {
        display: none;
      }
    }

    /* Font Sizes */
    [data-font="default"] .card-kanji { font-size: clamp(56px, 10vw, 80px); }
    [data-font="default"] .card-furi { font-size: clamp(18px, 3vw, 24px); }
    [data-font="default"] .card-meaning { font-size: clamp(20px, 3.5vw, 28px); }

    [data-font="medium"] .card-kanji { font-size: clamp(72px, 12vw, 100px); }
    [data-font="medium"] .card-furi { font-size: clamp(22px, 3.5vw, 30px); }
    [data-font="medium"] .card-meaning { font-size: clamp(24px, 4vw, 34px); }

    [data-font="big"] .card-kanji { font-size: clamp(88px, 14vw, 120px); }
    [data-font="big"] .card-furi { font-size: clamp(26px, 4vw, 36px); }
    [data-font="big"] .card-meaning { font-size: clamp(28px, 4.5vw, 40px); }
  </style>
</head>
<body data-theme="sakura" data-font="default">

  <!-- Loading Screen -->
  <div id="loadingScreen" class="loading-screen">
    ‚è≥ Memuat data kanji...
  </div>

  <!-- Welcome Screen with Animation -->
  <div id="welcomeScreen" class="welcome-screen hidden">
    <div class="particles" id="particles"></div>
    <div class="welcome-content">
      <div class="welcome-emoji">üéå</div>
      <h1 class="welcome-title">„Çà„ÅÜ„Åì„Åù</h1>
      <p class="welcome-subtitle">Dashboard Pembelajaran Kanji Profesional<br>724 Êº¢Â≠ó ‚Ä¢ 11 Level ‚Ä¢ 8ÊúüÁîü 2025</p>
      <button class="btn-start" onclick="startApp()">üöÄ Mulai Belajar</button>
    </div>
  </div>

  <!-- Hamburger Menu (Mobile) -->
  <button class="hamburger" id="hamburger" onclick="toggleSidebar()">‚ò∞</button>

  <!-- Theme Switcher (Always Visible) -->
  <div class="theme-switcher" id="themeSwitcher">
    <button class="theme-btn active" data-theme="sakura" title="Tema Sakura">üå∏</button>
    <button class="theme-btn" data-theme="dark" title="Tema Dark">üåô</button>
    <button class="theme-btn" data-theme="light" title="Tema Light">‚òÄÔ∏è</button>
  </div>

  <!-- Dashboard -->
  <div class="dashboard" id="dashboard">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <button class="sidebar-toggle" id="sidebarToggle" onclick="toggleSidebarMinimize()">‚óÄ</button>
      
      <div class="sidebar-header">
        <div class="sidebar-title">üìö Dashboard Guru</div>
        <div class="sidebar-subtitle">Sistem Pembelajaran Kanji</div>
      </div>

      <nav class="nav-menu">
        <button class="nav-item active" onclick="showPage('overview')">
          <span class="nav-icon">üè†</span>
          <span>Ringkasan</span>
        </button>
        <button class="nav-item" onclick="showPage('flashcard')">
          <span class="nav-icon">üÉè</span>
          <span>Flashcard</span>
        </button>
        <button class="nav-item" onclick="showPage('kanjilist')">
          <span class="nav-icon">üìã</span>
          <span>Daftar Kanji</span>
        </button>
        <button class="nav-item" onclick="showPage('minna')">
          <span class="nav-icon">üìò</span>
          <span>Minna no Nihongo</span>
        </button>
        <button class="nav-item" onclick="showPage('charenji')">
          <span class="nav-icon">üéØ</span>
          <span>Modul Charenji</span>
        </button>
        <button class="nav-item" onclick="showPage('jft')">
          <span class="nav-icon">üìú</span>
          <span>JFT Basic A2</span>
        </button>
        <button class="nav-item" onclick="showPage('about')">
          <span class="nav-icon">‚ÑπÔ∏è</span>
          <span>Tentang</span>
        </button>
        <button class="nav-item" onclick="showPage('settings')">
          <span class="nav-icon">‚öôÔ∏è</span>
          <span>Pengaturan</span>
        </button>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
      <!-- Overview Page -->
      <div id="overviewPage" class="content-page active">
        <div class="page-header">
          <h1 class="page-title">üìä Ringkasan Pembelajaran</h1>
          <p class="page-description">Dashboard monitoring pembelajaran kanji siswa</p>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">üìö</div>
            <div class="stat-value" id="totalKanji">724</div>
            <div class="stat-label">Total Kanji</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">üéØ</div>
            <div class="stat-value">11</div>
            <div class="stat-label">Level Tersedia</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-value">8ÊúüÁîü</div>
            <div class="stat-label">Angkatan</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">‚úÖ</div>
            <div class="stat-value">100%</div>
            <div class="stat-label">Kelengkapan Data</div>
          </div>
        </div>

        <div class="shortcuts-section">
          <h2 class="section-title">üöÄ Akses Cepat</h2>
          <div class="shortcuts-grid">
            <div class="shortcut-card" onclick="showPage('flashcard')">
              <div class="shortcut-icon">üÉè</div>
              <div class="shortcut-title">Flashcard Kanji</div>
              <p class="shortcut-desc">Latihan interaktif dengan sistem kartu bolak-balik untuk menghafal kanji</p>
            </div>

            <div class="shortcut-card" onclick="showPage('kanjilist')">
              <div class="shortcut-icon">üìã</div>
              <div class="shortcut-title">Daftar Kanji</div>
              <p class="shortcut-desc">Lihat seluruh daftar kanji yang tersedia berdasarkan level pembelajaran</p>
            </div>

            <div class="shortcut-card" onclick="showPage('minna')">
              <div class="shortcut-icon">üìò</div>
              <div class="shortcut-title">Minna no Nihongo</div>
              <p class="shortcut-desc">Materi pembelajaran lengkap dari buku Minna no Nihongo per bab</p>
              <span class="badge-coming">COMING SOON</span>
            </div>

            <div class="shortcut-card" onclick="showPage('charenji')">
              <div class="shortcut-icon">üéØ</div>
              <div class="shortcut-title">Modul Charenji</div>
              <p class="shortcut-desc">Tantangan dan latihan soal intensif untuk meningkatkan kemampuan</p>
              <span class="badge-coming">COMING SOON</span>
            </div>

            <div class="shortcut-card" onclick="showPage('jft')">
              <div class="shortcut-icon">üìú</div>
              <div class="shortcut-title">JFT Basic A2</div>
              <p class="shortcut-desc">Persiapan ujian JFT Basic level A2 untuk pekerja di Jepang</p>
              <span class="badge-coming">COMING SOON</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Flashcard Page -->
      <div id="flashcardPage" class="content-page" style="display:none;">
        <div class="page-header">
          <h1 class="page-title">üÉè Flashcard Interaktif</h1>
          <p class="page-description">Mode pembelajaran dengan kartu interaktif</p>
        </div>

        <div class="flashcard-container" id="flashcardContainer">
          <div class="controls-panel">
            <div class="control-group">
              <label>Ukuran:</label>
              <select id="fontSelect">
                <option value="default">Default</option>
                <option value="medium">Medium</option>
                <option value="big">Besar</option>
              </select>
            </div>
            <div class="control-group">
              <label>Level:</label>
              <select id="levelFilter">
                <option value="all">Semua</option>
                <option value="1">Level 1</option>
                <option value="2">Level 2</option>
                <option value="3">Level 3</option>
                <option value="4">Level 4</option>
                <option value="5">Level 5</option>
                <option value="6">Level 6</option>
                <option value="7">Level 7</option>
                <option value="8">Level 8</option>
                <option value="9">Level 9</option>
                <option value="10">Level 10</option>
                <option value="11">Level 11</option>
              </select>
            </div>
            <button class="btn" onclick="shuffleCards()">üé≤ Acak</button>
            <button class="btn" id="fullscreenToggle" onclick="toggleFullscreen()">‚õ∂ Fullscreen</button>
          </div>

          <div class="card-stage">
            <div class="card-scene">
              <div class="card" id="flashcard" onclick="flipCard()">
                <div class="card-face front">
                  <div class="card-kanji" id="frontKanji">‰∏Ä</div>
                </div>
                <div class="card-face back">
                  <div class="card-kanji" id="backKanji">‰∏Ä</div>
                  <div class="card-furi" id="backFuri">„ÅÑ„Å°</div>
                  <div class="card-meaning" id="backMeaning">Satu</div>
                </div>
              </div>
            </div>
          </div>

          <div class="progress-info" id="progressInfo">1 / 724</div>

          <div class="card-controls">
            <button class="btn" onclick="prevCard()">‚Üê Sebelumnya</button>
            <button class="btn" onclick="flipCard()">üîÑ Balik</button>
            <button class="btn" onclick="nextCard()">Selanjutnya ‚Üí</button>
          </div>
        </div>
      </div>

      <!-- Kanji List Page -->
      <div id="kanjilistPage" class="content-page" style="display:none;">
        <div class="page-header">
          <h1 class="page-title">üìã Daftar Lengkap Kanji</h1>
          <p class="page-description">Semua kanji dikelompokkan berdasarkan level</p>
        </div>

        <div class="level-tabs" id="levelTabs">
          <button class="level-tab active" onclick="filterKanjiList('all')">Semua</button>
          <button class="level-tab" onclick="filterKanjiList('1')">Level 1</button>
          <button class="level-tab" onclick="filterKanjiList('2')">Level 2</button>
          <button class="level-tab" onclick="filterKanjiList('3')">Level 3</button>
          <button class="level-tab" onclick="filterKanjiList('4')">Level 4</button>
          <button class="level-tab" onclick="filterKanjiList('5')">Level 5</button>
          <button class="level-tab" onclick="filterKanjiList('6')">Level 6</button>
          <button class="level-tab" onclick="filterKanjiList('7')">Level 7</button>
          <button class="level-tab" onclick="filterKanjiList('8')">Level 8</button>
          <button class="level-tab" onclick="filterKanjiList('9')">Level 9</button>
          <button class="level-tab" onclick="filterKanjiList('10')">Level 10</button>
          <button class="level-tab" onclick="filterKanjiList('11')">Level 11</button>
        </div>

        <div class="kanji-grid" id="kanjiGrid"></div>
      </div>

      <!-- Settings Page -->
      <div id="settingsPage" class="content-page" style="display:none;">
        <div class="page-header">
          <h1 class="page-title">‚öôÔ∏è Pengaturan</h1>
          <p class="page-description">Konfigurasi sistem pembelajaran</p>
        </div>

        <div style="background: var(--btn-bg); padding: 32px; border-radius: 16px; box-shadow: var(--btn-shadow); max-width: 600px;">
          <h3 style="margin-bottom: 20px; color: var(--text-primary);">Tema Aplikasi</h3>
          <p style="color: var(--text-secondary); margin-bottom: 20px;">Tema akan otomatis menyesuaikan waktu:</p>
          <ul style="color: var(--text-secondary); margin-left: 20px; line-height: 1.8;">
            <li>üå∏ <strong>Sakura</strong> - Pagi (06:00 - 11:59)</li>
            <li>‚òÄÔ∏è <strong>Light</strong> - Siang (12:00 - 17:59)</li>
            <li>üåô <strong>Dark</strong> - Malam (18:00 - 05:59)</li>
          </ul>
          <p style="color: var(--text-secondary); margin-top: 20px; font-size: 14px;">
            üí° Anda dapat mengubah tema manual dengan tombol di pojok kanan bawah
          </p>
        </div>
      </div>

      <!-- Minna no Nihongo Page -->
      <div id="minnaPage" class="content-page" style="display:none;">
        <div class="page-header">
          <h1 class="page-title">üìò Minna no Nihongo</h1>
          <p class="page-description">Materi pembelajaran per bab</p>
        </div>
        
        <div style="background: var(--btn-bg); padding: 40px; border-radius: 16px; box-shadow: var(--btn-shadow); text-align: center; max-width: 600px; margin: 0 auto;">
          <div style="font-size: 80px; margin-bottom: 20px;">üìò</div>
          <h2 style="color: var(--text-primary); margin-bottom: 16px;">Konten Segera Hadir</h2>
          <p style="color: var(--text-secondary); line-height: 1.8;">
            Modul Minna no Nihongo akan berisi materi pembelajaran lengkap per bab dengan latihan soal, vocabulary, dan grammar points.
          </p>
        </div>
      </div>

      <!-- Charenji Page -->
      <div id="charenjiPage" class="content-page" style="display:none;">
        <div class="page-header">
          <h1 class="page-title">üéØ Modul Charenji</h1>
          <p class="page-description">Tantangan & latihan intensif</p>
        </div>
        
        <div style="background: var(--btn-bg); padding: 40px; border-radius: 16px; box-shadow: var(--btn-shadow); text-align: center; max-width: 600px; margin: 0 auto;">
          <div style="font-size: 80px; margin-bottom: 20px;">üéØ</div>
          <h2 style="color: var(--text-primary); margin-bottom: 16px;">Konten Segera Hadir</h2>
          <p style="color: var(--text-secondary); line-height: 1.8;">
            Modul Charenji akan berisi berbagai tantangan dan latihan soal intensif untuk meningkatkan kemampuan bahasa Jepang Anda.
          </p>
        </div>
      </div>

      <!-- JFT Basic A2 Page -->
      <div id="jftPage" class="content-page" style="display:none;">
        <div class="page-header">
          <h1 class="page-title">üìú JFT Basic A2</h1>
          <p class="page-description">Persiapan ujian JFT Basic Level A2</p>
        </div>
        
        <div style="background: var(--btn-bg); padding: 40px; border-radius: 16px; box-shadow: var(--btn-shadow); text-align: center; max-width: 600px; margin: 0 auto;">
          <div style="font-size: 80px; margin-bottom: 20px;">üìú</div>
          <h2 style="color: var(--text-primary); margin-bottom: 16px;">Konten Segera Hadir</h2>
          <p style="color: var(--text-secondary); line-height: 1.8;">
            Modul JFT Basic A2 akan berisi materi persiapan lengkap untuk ujian Japanese Foundation Test level A2 yang dibutuhkan untuk bekerja di Jepang.
          </p>
        </div>
      </div>

      <!-- About Page -->
      <div id="aboutPage" class="content-page" style="display:none;">
        <div class="page-header">
          <h1 class="page-title">‚ÑπÔ∏è Tentang</h1>
          <p class="page-description">Informasi tentang Jepang, belajar, dan website ini</p>
        </div>

        <div style="max-width: 800px; margin: 0 auto;">
          <!-- About Japan -->
          <div style="background: var(--btn-bg); padding: 32px; border-radius: 16px; box-shadow: var(--btn-shadow); margin-bottom: 24px;">
            <h2 style="color: var(--text-primary); margin-bottom: 16px; font-size: 24px; display: flex; align-items: center; gap: 12px;">
              üáØüáµ Tentang Jepang
            </h2>
            <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 12px;">
              Jepang (Êó•Êú¨ Nihon/Nippon) adalah negara kepulauan di Asia Timur dengan populasi sekitar 125 juta jiwa. Negara ini terkenal dengan teknologi canggih, budaya tradisional yang kaya, serta sistem pendidikan dan kerja yang disiplin.
            </p>
            <p style="color: var(--text-secondary); line-height: 1.8;">
              <strong>Fakta Menarik:</strong><br>
              ‚Ä¢ Bahasa resmi: Bahasa Jepang (Êó•Êú¨Ë™û Nihongo)<br>
              ‚Ä¢ Ibu kota: Tokyo (Êù±‰∫¨)<br>
              ‚Ä¢ Sistem penulisan: Hiragana („Å≤„Çâ„Åå„Å™), Katakana („Ç´„Çø„Ç´„Éä), dan Kanji (Êº¢Â≠ó)<br>
              ‚Ä¢ Mata uang: Yen (ÂÜÜ en)
            </p>
          </div>

          <!-- About Learning -->
          <div style="background: var(--btn-bg); padding: 32px; border-radius: 16px; box-shadow: var(--btn-shadow); margin-bottom: 24px;">
            <h2 style="color: var(--text-primary); margin-bottom: 16px; font-size: 24px; display: flex; align-items: center; gap: 12px;">
              üìö Tentang Pembelajaran
            </h2>
            <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 12px;">
              Website ini dirancang khusus untuk membantu pembelajaran bahasa Jepang, khususnya kanji, dengan metode yang sistematis dan interaktif. Kami menyediakan 724 kanji yang dikategorikan dalam 11 level pembelajaran.
            </p>
            <p style="color: var(--text-secondary); line-height: 1.8;">
              <strong>Metode Pembelajaran:</strong><br>
              ‚Ä¢ <strong>Flashcard Interaktif</strong> - Sistem kartu bolak-balik untuk menghafal<br>
              ‚Ä¢ <strong>Level Bertahap</strong> - Dari dasar hingga mahir (Level 1-11)<br>
              ‚Ä¢ <strong>Audio Visual</strong> - Kanji dengan furigana dan artinya<br>
              ‚Ä¢ <strong>Practice Makes Perfect</strong> - Latihan soal dan ujian
            </p>
          </div>

          <!-- About Website -->
          <div style="background: var(--btn-bg); padding: 32px; border-radius: 16px; box-shadow: var(--btn-shadow);">
            <h2 style="color: var(--text-primary); margin-bottom: 16px; font-size: 24px; display: flex; align-items: center; gap: 12px;">
              üíª Tentang Website
            </h2>
            <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 12px;">
              Dashboard Pembelajaran Kanji adalah platform edukasi online yang dikembangkan untuk mendukung guru dan siswa dalam proses belajar mengajar bahasa Jepang. Website ini menyediakan berbagai fitur pembelajaran yang komprehensif dan mudah digunakan.
            </p>
            <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 12px;">
              <strong>Fitur Unggulan:</strong><br>
              ‚Ä¢ Dashboard profesional untuk monitoring pembelajaran<br>
              ‚Ä¢ Flashcard interaktif dengan sistem spaced repetition<br>
              ‚Ä¢ Daftar lengkap 724 kanji dengan kategorisasi level<br>
              ‚Ä¢ Mode fullscreen untuk fokus belajar<br>
              ‚Ä¢ Tema otomatis sesuai waktu (pagi, siang, malam)<br>
              ‚Ä¢ Responsive design untuk semua perangkat
            </p>
            <p style="color: var(--text-secondary); line-height: 1.8;">
              <strong>Versi:</strong> 2.0 - Dashboard Edition<br>
              <strong>Update Terakhir:</strong> 2025<br>
              <strong>Untuk:</strong> 8ÊúüÁîü (Angkatan 8)
            </p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Dummy Data Kanji (fallback jika kanji.json tidak tersedia)
    const DUMMY_KANJI = [
      {kanji: "‰∏Ä", furi: "„ÅÑ„Å°", meaning: "Satu", level: 1},
      {kanji: "‰∫å", furi: "„Å´", meaning: "Dua", level: 1},
      {kanji: "‰∏â", furi: "„Åï„Çì", meaning: "Tiga", level: 1},
      {kanji: "Âõõ", furi: "„Çà„Çì / „Åó", meaning: "Empat", level: 1},
      {kanji: "‰∫î", furi: "„Åî", meaning: "Lima", level: 1},
      {kanji: "ÂÖ≠", furi: "„Çç„Åè", meaning: "Enam", level: 1},
      {kanji: "‰∏É", furi: "„Å™„Å™ / „Åó„Å°", meaning: "Tujuh", level: 1},
      {kanji: "ÂÖ´", furi: "„ÅØ„Å°", meaning: "Delapan", level: 1},
      {kanji: "‰πù", furi: "„Åç„ÇÖ„ÅÜ / „Åè", meaning: "Sembilan", level: 1},
      {kanji: "ÂçÅ", furi: "„Åò„ÇÖ„ÅÜ", meaning: "Sepuluh", level: 1},
      {kanji: "Áôæ", furi: "„Å≤„ÇÉ„Åè", meaning: "Seratus", level: 2},
      {kanji: "ÂçÉ", furi: "„Åõ„Çì", meaning: "Seribu", level: 2},
      {kanji: "‰∏á", furi: "„Åæ„Çì", meaning: "Sepuluh ribu", level: 2},
      {kanji: "ÂÜÜ", furi: "„Åà„Çì", meaning: "Yen / Lingkaran", level: 2},
      {kanji: "Êó•", furi: "„Å´„Å° / „Å≤", meaning: "Hari / Matahari", level: 2},
      {kanji: "Êúà", furi: "„Åå„Å§ / „Å§„Åç", meaning: "Bulan", level: 2},
      {kanji: "ÁÅ´", furi: "„Åã / „Å≤", meaning: "Api", level: 3},
      {kanji: "Ê∞¥", furi: "„Åô„ÅÑ / „Åø„Åö", meaning: "Air", level: 3},
      {kanji: "Êú®", furi: "„ÇÇ„Åè / „Åç", meaning: "Kayu / Pohon", level: 3},
      {kanji: "Èáë", furi: "„Åç„Çì / „Åã„Å≠", meaning: "Emas / Uang", level: 3},
      {kanji: "Âúü", furi: "„Å© / „Å§„Å°", meaning: "Tanah", level: 3},
      {kanji: "‰∫∫", furi: "„Åò„Çì / „Å≤„Å®", meaning: "Orang", level: 4},
      {kanji: "Êú¨", furi: "„Åª„Çì", meaning: "Buku / Asal", level: 4},
      {kanji: "Â≠¶", furi: "„Åå„Åè", meaning: "Belajar", level: 4},
      {kanji: "Áîü", furi: "„Åõ„ÅÑ", meaning: "Kehidupan / Lahir", level: 4},
      {kanji: "ÂÖà", furi: "„Åõ„Çì", meaning: "Sebelum / Dahulu", level: 5},
      {kanji: "Âπ¥", furi: "„Å≠„Çì", meaning: "Tahun", level: 5},
      {kanji: "ÂàÜ", furi: "„Åµ„Çì / „Å∂„Çì", meaning: "Menit / Bagian", level: 5},
      {kanji: "ÊôÇ", furi: "„Åò / „Å®„Åç", meaning: "Waktu / Jam", level: 5},
      {kanji: "Â±±", furi: "„Åï„Çì / „ÇÑ„Åæ", meaning: "Gunung", level: 6},
      {kanji: "Â∑ù", furi: "„Åã„Çè", meaning: "Sungai", level: 6},
      {kanji: "Â§©", furi: "„Å¶„Çì", meaning: "Langit / Surga", level: 6},
      {kanji: "Âú∞", furi: "„Å°", meaning: "Bumi / Tanah", level: 6},
      {kanji: "ÂõΩ", furi: "„Åì„Åè / „Åè„Å´", meaning: "Negara", level: 7},
      {kanji: "Ë™û", furi: "„Åî", meaning: "Bahasa", level: 7},
      {kanji: "Êñá", furi: "„Å∂„Çì", meaning: "Tulisan / Kalimat", level: 7},
      {kanji: "Â≠ó", furi: "„Åò", meaning: "Huruf / Karakter", level: 7},
      {kanji: "È£ü", furi: "„Åó„Çá„Åè / „Åü", meaning: "Makan", level: 8},
      {kanji: "È£≤", furi: "„ÅÑ„Çì / „ÅÆ", meaning: "Minum", level: 8},
      {kanji: "Ë≤∑", furi: "„Åã", meaning: "Membeli", level: 8},
      {kanji: "Â£≤", furi: "„ÅÜ", meaning: "Menjual", level: 8},
      {kanji: "Ë¶ã", furi: "„Åë„Çì / „Åø", meaning: "Melihat", level: 9},
      {kanji: "ËÅû", furi: "„Å∂„Çì / „Åç", meaning: "Mendengar", level: 9},
      {kanji: "Ë™≠", furi: "„Å©„Åè / „Çà", meaning: "Membaca", level: 9},
      {kanji: "Êõ∏", furi: "„Åó„Çá / „Åã", meaning: "Menulis", level: 9},
      {kanji: "Ë©±", furi: "„Çè / „ÅØ„Å™", meaning: "Berbicara", level: 10},
      {kanji: "Ë®Ä", furi: "„Åí„Çì / „ÅÑ", meaning: "Berkata", level: 10},
      {kanji: "Ë°å", furi: "„Åì„ÅÜ / „ÅÑ", meaning: "Pergi", level: 10},
      {kanji: "Êù•", furi: "„Çâ„ÅÑ / „Åè", meaning: "Datang", level: 10},
      {kanji: "Â∏∞", furi: "„Åç / „Åã„Åà", meaning: "Pulang", level: 11},
      {kanji: "ÂÖ•", furi: "„Å´„ÇÖ„ÅÜ / „ÅÑ", meaning: "Masuk", level: 11},
      {kanji: "Âá∫", furi: "„Åó„ÇÖ„Å§ / „Åß", meaning: "Keluar", level: 11},
      {kanji: "‰ºö", furi: "„Åã„ÅÑ / „ÅÇ", meaning: "Bertemu", level: 11}
    ];

    // Global Variables
    let allKanjiData = [];
    let filteredCards = [];
    let currentIndex = 0;
    let currentPage = 'overview';
    let isFullscreen = false;
    let isSidebarMinimized = false;

    // Elements
    const loadingScreen = document.getElementById('loadingScreen');
    const welcomeScreen = document.getElementById('welcomeScreen');
    const dashboard = document.getElementById('dashboard');
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebarToggle');
    const mainContent = document.getElementById('mainContent');
    const flashcard = document.getElementById('flashcard');
    const flashcardContainer = document.getElementById('flashcardContainer');
    const fullscreenToggle = document.getElementById('fullscreenToggle');
    const frontKanji = document.getElementById('frontKanji');
    const backKanji = document.getElementById('backKanji');
    const backFuri = document.getElementById('backFuri');
    const backMeaning = document.getElementById('backMeaning');
    const progressInfo = document.getElementById('progressInfo');
    const fontSelect = document.getElementById('fontSelect');
    const levelFilter = document.getElementById('levelFilter');
    const kanjiGrid = document.getElementById('kanjiGrid');
    const totalKanjiEl = document.getElementById('totalKanji');

    // Auto Theme by Time
    function setThemeByTime() {
      const hour = new Date().getHours();
      let theme = 'dark'; // default malam
      
      if (hour >= 6 && hour < 12) {
        theme = 'sakura'; // pagi
      } else if (hour >= 12 && hour < 18) {
        theme = 'light'; // siang
      }
      
      applyTheme(theme);
    }

    // Apply Theme
    function applyTheme(theme) {
      document.body.setAttribute('data-theme', theme);
      document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.theme === theme) {
          btn.classList.add('active');
        }
      });
    }

    // Theme Switcher
    document.querySelectorAll('.theme-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        applyTheme(btn.dataset.theme);
      });
    });

    // Create Particle Animation
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      for (let i = 0; i < 20; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 10 + 's';
        particle.style.animationDuration = (10 + Math.random() * 10) + 's';
        particlesContainer.appendChild(particle);
      }
    }

    // Start App
    function startApp() {
      welcomeScreen.classList.add('hidden');
      dashboard.classList.add('active');
    }

    // Toggle Sidebar (Mobile)
    function toggleSidebar() {
      sidebar.classList.toggle('open');
    }

    // Toggle Sidebar Minimize (Desktop)
    function toggleSidebarMinimize() {
      isSidebarMinimized = !isSidebarMinimized;
      sidebar.classList.toggle('minimized');
      mainContent.classList.toggle('expanded');
      
      if (isSidebarMinimized) {
        sidebarToggle.textContent = '‚ñ∂';
        sidebarToggle.title = 'Maximize Sidebar';
      } else {
        sidebarToggle.textContent = '‚óÄ';
        sidebarToggle.title = 'Minimize Sidebar';
      }
    }

    // Toggle Fullscreen for Flashcard
    function toggleFullscreen() {
      isFullscreen = !isFullscreen;
      
      if (isFullscreen) {
        flashcardContainer.classList.add('fullscreen-mode');
        document.body.classList.add('fullscreen-active');
        sidebar.style.display = 'none';
        mainContent.style.marginLeft = '0';
        fullscreenToggle.textContent = '‚õ∂ Exit Fullscreen';
        
        // Request actual fullscreen
        if (flashcardContainer.requestFullscreen) {
          flashcardContainer.requestFullscreen();
        } else if (flashcardContainer.webkitRequestFullscreen) {
          flashcardContainer.webkitRequestFullscreen();
        } else if (flashcardContainer.msRequestFullscreen) {
          flashcardContainer.msRequestFullscreen();
        }
      } else {
        exitFullscreenMode();
      }
    }

    function exitFullscreenMode() {
      isFullscreen = false;
      flashcardContainer.classList.remove('fullscreen-mode');
      document.body.classList.remove('fullscreen-active');
      sidebar.style.display = 'flex';
      mainContent.style.marginLeft = isSidebarMinimized ? '80px' : '280px';
      fullscreenToggle.textContent = '‚õ∂ Fullscreen';
      
      // Exit actual fullscreen
      if (document.exitFullscreen) {
        document.exitFullscreen();
      } else if (document.webkitExitFullscreen) {
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) {
        document.msExitFullscreen();
      }
    }

    // Listen to fullscreen change events
    document.addEventListener('fullscreenchange', handleFullscreenChange);
    document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
    document.addEventListener('mozfullscreenchange', handleFullscreenChange);
    document.addEventListener('MSFullscreenChange', handleFullscreenChange);

    function handleFullscreenChange() {
      if (!document.fullscreenElement && !document.webkitFullscreenElement && 
          !document.mozFullScreenElement && !document.msFullscreenElement) {
        if (isFullscreen) {
          exitFullscreenMode();
        }
      }
    }

    // Show Page
    function showPage(page) {
		currentPage = page;

		// Update nav items (highlight menu aktif di sidebar)
		document.querySelectorAll('.nav-item').forEach(item => {
			item.classList.remove('active');
			if (item.getAttribute('onclick') === `showPage('${page}')`) {
			item.classList.add('active');
			}
		});

		// Sembunyikan semua halaman
		document.querySelectorAll('.content-page').forEach(p => {
			p.style.display = 'none';
		});

	  // Tampilkan halaman sesuai parameter
		const pageMap = {
			'overview': 'overviewPage',
			'flashcard': 'flashcardPage',
			'kanjilist': 'kanjilistPage',
			'minna': 'minnaPage',
			'charenji': 'charenjiPage',
			'jft': 'jftPage',
			'about': 'aboutPage',
			'settings': 'settingsPage'
		};

		const pageId = pageMap[page];
		if (pageId) {
			document.getElementById(pageId).style.display = 'block';

			// Keluar fullscreen jika pindah halaman selain flashcard
			if (isFullscreen && page !== 'flashcard') {
			exitFullscreenMode();
			}

			if (page === 'flashcard') {
			renderFlashcard();
			} else if (page === 'kanjilist') {
			renderKanjiList('all');
			}
		}

		// Tutup sidebar otomatis jika di mobile
		if (window.innerWidth <= 768) {
			sidebar.classList.remove('open');
		}
	}


    // Load Kanji Data
    async function loadKanjiData() {
      try {
        const response = await fetch('kanji.json', { cache: 'no-cache' });
        if (!response.ok) throw new Error('File tidak ditemukan');
        
        const data = await response.json();
        if (!Array.isArray(data) || data.length === 0) {
          throw new Error('Format data salah');
        }
        
        allKanjiData = data;
        console.log('‚úÖ Data kanji berhasil dimuat:', allKanjiData.length, 'kanji');
      } catch (error) {
        console.warn('‚ö†Ô∏è Menggunakan data dummy:', error.message);
        allKanjiData = DUMMY_KANJI;
      }
      
      filteredCards = [...allKanjiData];
      totalKanjiEl.textContent = allKanjiData.length;
      
      // Show welcome screen
      loadingScreen.classList.add('hidden');
      welcomeScreen.classList.remove('hidden');
      createParticles();
      setThemeByTime();
    }

    // Flashcard Functions
    function renderFlashcard() {
      if (!filteredCards.length) return;
      
      const card = filteredCards[currentIndex];
      frontKanji.textContent = card.kanji;
      backKanji.textContent = card.kanji;
      backFuri.textContent = card.furi;
      backMeaning.textContent = card.meaning;
      progressInfo.textContent = `${currentIndex + 1} / ${filteredCards.length}`;
      flashcard.classList.remove('flipped');
    }

    function flipCard() {
      flashcard.classList.toggle('flipped');
    }

    function nextCard() {
      if (!filteredCards.length) return;
      currentIndex = (currentIndex + 1) % filteredCards.length;
      renderFlashcard();
    }

    function prevCard() {
      if (!filteredCards.length) return;
      currentIndex = (currentIndex - 1 + filteredCards.length) % filteredCards.length;
      renderFlashcard();
    }

    function shuffleCards() {
      filteredCards.sort(() => Math.random() - 0.5);
      currentIndex = 0;
      renderFlashcard();
    }

    // Font Size
    fontSelect.addEventListener('change', (e) => {
      document.body.setAttribute('data-font', e.target.value);
    });

    // Level Filter
    levelFilter.addEventListener('change', (e) => {
      const level = e.target.value;
      if (level === 'all') {
        filteredCards = [...allKanjiData];
      } else {
        filteredCards = allKanjiData.filter(k => k.level === parseInt(level));
      }
      currentIndex = 0;
      renderFlashcard();
    });

    // Kanji List Functions
    function renderKanjiList(level) {
      const filtered = level === 'all' 
        ? allKanjiData 
        : allKanjiData.filter(k => k.level === parseInt(level));
      
      kanjiGrid.innerHTML = '';
      
      if (filtered.length === 0) {
        kanjiGrid.innerHTML = '<p style="text-align:center; color:var(--text-secondary); grid-column: 1/-1;">Tidak ada data</p>';
        return;
      }

      filtered.forEach(kanji => {
        const item = document.createElement('div');
        item.className = 'kanji-item';
        item.innerHTML = `
          <div class="kanji-char">${kanji.kanji}</div>
          <div class="kanji-furi">${kanji.furi}</div>
          <div class="kanji-meaning">${kanji.meaning}</div>
          <div class="kanji-level">Level ${kanji.level}</div>
        `;
        kanjiGrid.appendChild(item);
      });
    }

    function filterKanjiList(level) {
      renderKanjiList(level);
      
      // Update active tab
      document.querySelectorAll('.level-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      event.target.classList.add('active');
    }

    // Keyboard Shortcuts
    document.addEventListener('keydown', (e) => {
      if (currentPage === 'flashcard') {
        if (e.code === 'Space') {
          e.preventDefault();
          flipCard();
        }
        if (e.key === 'ArrowRight') nextCard();
        if (e.key === 'ArrowLeft') prevCard();
        if (e.key === 'f' || e.key === 'F') {
          e.preventDefault();
          toggleFullscreen();
        }
        if (e.key === 'Escape' && isFullscreen) {
          exitFullscreenMode();
        }
      }
    });

    // Initialize
    loadKanjiData();
  </script>
</body>
</html>